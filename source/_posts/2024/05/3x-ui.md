---
title: 3x-ui详细安装教程
date: 2024-05-12 21:56:27
tags:
  - 3x-ui
---
# ✰全新安装或升级3x-ui版本流程步骤✰
## 项目地址：https://github.com/xeefei/3x-ui
## 【3x-ui】中文交流群：https://t.me/XUI_CN
### 一、购买一台性能还不错的VPS，可通过本页链接购买，
#### PS：若你不想升级系统，则可以跳过此步骤。
##### 1、若你需要更新/升级系统，Debian系统可用如下命令：
    apt update
    apt upgrade -y
    apt dist-upgrade -y
    apt autoclean
    apt autoremove -y
##### 2、查看系统当前版本：
    cat /etc/debian_version
##### 3、查看内核版本：
    uname -r
##### 4、列出所有内核：
    dpkg --list | grep linux-image
##### 5、更新完成后执行重新引导：
    update-grub
##### 6、完成以上步骤之后输入reboot重启系统。


### 二、全新安装或升级现有3x-ui版本，
##### 1、【全新安装】请执行以下脚本：
    bash <(curl -Ls https://raw.githubusercontent.com/xeefei/3x-ui/master/install.sh)
##### 2、如果执行了上面的代码但是报错，证明你的系统里面没有curl这个软件，请执行以下命令先安装curl软件，安装curl之后再去执行上面代码，
    apt update -y&&apt install -y curl&&apt install -y socat
##### 3、若要对版本进行升级，可直接通过脚本选择【2】----->【更新面板】，

##### PS：若要安装指定的版本，请将该版本添加到安装命令的末尾。 e.g., ver v2.3.4:
    bash <(curl -Ls https://raw.githubusercontent.com/xeefei/3x-ui/master/install.sh) v2.3.4

------------

------------

------------
### 三、如果你的VPS是默认安装了防火墙的，那么就要进入3x-ui脚本放行端口，搭建之后端口默认是关闭的，安装/创建入站完成之后请放行【指定端口】，一定要放行端口之后再去导入软件测试，
##### 1、放行【面板登录端口】，
##### 2、放行出入站管理协议端口，
##### 3、为保证能够每3个月【自动续签】证书，须放行80端口，
##### 4、可通过此脚本的第【20】选项去安装防火墙进行管理，
##### 5、若要一次性放行多个端口或一整个段的端口，用英文逗号隔开。
#### PS：若你的VPS没有防火墙，则所有端口都是能够ping通的，可自己选择是否进入脚本安装防火墙保证安全，但安装了防火墙必须放行相应端口。

------------

------------

------------
### 四、若需要用域名登录管理面板，以及后期想要实现【偷自己】的功能，则需要安装证书；如果不需要以上功能或无域名，可以跳过这步，
##### 1、把自己的域名托管到CF，并解析到自己VPS的IP，不要开启【小云朵】，
##### 2、输入x-ui命令进入面板管理脚本，通过选择第【16】选项去进行安装，
##### 3、记录好已经安装证书的【路径】，位置在：/root/.acme.sh/（域名）_ecc，后续需要用到，
##### 4、进入后台【面板设置】----->【常规】中，去分别填入刚才已经记录的证书公钥、私钥路径，
##### 5、点击左上角【重启面板】，即可用自己域名进行登录管理；也可按照后续方法实现【自己偷自己】。

------------

------------

------------
### 五、登录面板进行【常规】设置，特别是如果在安装过程中，全部都是默认【回车键】安装的话，用户名/密码是随机的，而面板监听端口默认是2053，最好进入面板更改，
##### 1、填写自己想要设置的【面板监听端口】，并去登录SSH放行，
##### 2、更改自己想要设置的【面板url根路径】，后续加上路径登录访问，
##### 3、其他：安全设定和电报机器人等配置，可自行根据需求去进行设置，
##### 4、若申请了证书须填写证书公钥/私钥路径，建议配置电报机器人方便管理，
##### 5、面板设置【改动保存】之后，都需要点击左上角【重启面板】，才能生效。
#### PS：若你在正确完成了上述步骤之后，你没有安装证书的情况下，去用IP+端口号/路径的方式却不能访问面板，那请检查一下是不是你的浏览器自动默认开启了https模式，需要手动调整一下改成http方式，把“s”去掉，即可访问成功。

------------

------------

------------
### 六、创建【入站协议】和添加【客户端】，并测试上网，
##### 1、点击左边【入站列表】，然后【添加入站】，传输方式保持【TCP】不变，尽量选择主流的vless+reality+vision协议组合，
##### 2、在选择reality协议时，偷的域名可以使用默认的，要使用其他的，请替换尽量保持一致就行，比如Apple、Yahoo，VPS所在地区的旅游、学校网站等；如果要实现【偷自己】，请参看后续【如何偷自己】的说明部分；而私钥/公钥部分，可以直接点击下方的【Get New Cert】获取一个随机的，
##### 3、在创建reality协议过程中，至于其他诸如：PROXY Protocol，HTTP 伪装，TPROXY，External Proxy等等选项，若无特殊要求，保持默认设置即可，不用去动它们，
##### 4、创建好入站协议之后，默认只有一个客户端，可根据自己需求继续添加；重点：并编辑客户端，选择【Flow流控】为xtls-rprx-vision-udp443，
##### 5、其他：流量限制，到期时间，客户TG的ID等选项根据自己需求填写，
##### 6、一定要放行端口之后，确保端口能够ping通，再导入软件，
##### 7、点击二维码或者复制链接导入到v2rayN等软件中进行测试。

------------

------------

------------
# ✰备份与恢复/迁移数据库流程（以Debian系统为例）✰
### 一、备份：通过配置好电报管理机器人，并去设置开启【自动备份】，每天凌晨12点会通过VPS管理机器人获取【备份配置】文件，有x-ui.db和config.json两个文件，可自行下载保存到自己电脑里面，
### 二、搭建：在新的VPS中全新安装好3x-ui面板，通过脚本放行之前配置的所有端口，一次性放行多个端口请用【英文逗号】分隔，
### 三、若需要安装证书，则提前把域名解析到新的VPS对应的IP，并且去输入x-ui选择第【16】选项去安装，并记录公钥/私钥的路径，无域名则跳过这一步，
### 四、恢复：SSH登录服务器找到/etc/x-ui/x-ui.db和/usr/local/x-ui/bin/config.json文件位置，上传之前的两个备份文件，进行覆盖，
##### PS：把之前通过自动备份下载得到的两个文件上传覆盖掉旧文件，重启3x-ui面板即可【迁移成功】；即使迁移过程中出现问题，你是有备份文件的，不用担心，多试几次。
### 五、若安装了证书，去核对/更改一下证书的路径，一般是同一个域名的话，位置在：/root/.acme.sh/（域名）_ecc，路径是相同的就不用更改，
### 六、重启面板/重启服务器，让上述步骤生效即可，这时可以看到所有配置都是之前自己常用的，包括面板用户名、密码，入站、客户端，电报机器人配置等。

------------

------------

------------
# ✰如何保护自己的IP不被墙被封？✰
##### 1、使用的代理协议要安全，加密是必备，推荐使用vless+reality+vision协议组合，
##### 2、因为有时节点会共享，在不同的地区，多个省份之间不要共同连接同一个IP，
##### 3、连接同一个IP就算了，不要同一个端口，不要同IP+同端口到处漫游，要分开，
##### 4、同一台VPS，不要在一天内一直大流量去下载东西使用，不要流量过高要切换，
##### 5、创建【入站协议】的时候，尽量用【高位端口】，比如40000--65000之间的端口号。
#### 提醒：为什么在特殊时期，比如：两会，春节等被封得最严重最惨？
##### 尼玛同一个IP+同一个端口号，多个省份去漫游，跟开飞机场一样！不封你，封谁的IP和端口？
#### 总结：不要多终端/多省份/多个朋友/共同使用同一个IP和端口号！使用3x-ui多创建几个【入站】，
####      多做几条备用，各用各的！各行其道才比较安全！GFW的思维模式是干掉机场，机场的特征个人用户不要去沾染，自然IP就保护好了。
     
------------

------------

------------
# ✰安装完成后如何设置调整成【中文界面】？✰
### 方法一、通过管理后台【登录页面】调整，登录时可以选择，
### 方法二、通过在管理后台-->【面板设置】中去选择设置，
### 【TG机器人】设置中文：通过在管理后台-->【面板设置】-->【机器人配置】中去选择设置，并建议打开数据库备份和登录通知。

------------

------------

------------
# ✰用3x-ui如何实现【自己偷自己】？✰
- 其实很简单，只要你为面板设置了证书，
- 开启了HTTPS登录，就可以将3x-ui自身作为Web Server，
- 无需Nginx等，这里给一个示例：
- 其中目标网站（Dest）请填写面板监听端口，
- 可选域名（SNI）填写面板登录域名，
- 如果您使用其他web server（如nginx）等，
- 将目标网站改为对应监听端口也可。
- 需要说明的是，如果您处于白名单地区，自己“偷”自己并不适合你；
- 其次，可选域名一项实际上可以填写任意SNI，只要客户端保持一致即可，不过并不推荐这样做。

------------

------------

------------
# ✰〔子域名〕被墙针对特征✰
#### 网络表现：
##### 1、可以Ping通域名和IP地址，
##### 2、子域名无法打开3X-UI管理界面，
##### 3、什么都正常就是不能上网；

#### 问题：
##### 你的子域名被墙针对了：无法上网！

#### 解决方案：
##### 1、更换为新的子域名，
##### 2、解析新的子域名到VPS的IP，
##### 3、重新去安装新证书，
##### 4、重启3X-UI和服务器，
##### 5、重新去获取链接并测试上网。
#### PS：若通过以上步骤还是不能正常上网，则重装VPS服务器OS系统，以及3X-UI面板全部重新安装，之后就正常了！

------------

------------

------------
# ✰在自己的VPS服务器部署【订阅转换】功能✰
### 如何把vless/vmess等协议转换成Clash/Surge等软件支持的格式？
##### 1、进入脚本输入x-ui命令调取面板，选择第【24】选项安装订阅转换模块，
##### 2、等待安装【订阅转换】成功之后，访问地址：你的IP:18080（端口号）进行转换，
##### 3、因为在转换过程中需要调取后端API，所以请确保端口25500是打开放行的，
##### 4、在得到【转换链接】之后，只要你的VPS服务器25500端口是能ping通的，就能导入Clash/Surge等软件成功下载配置，
##### 5、此功能集成到3x-ui面板中，是为了保证安全，通过调取24选项把【订阅转换】功能部署在自己的VPS中，不会造成链接泄露。
  
------------

------------

------------
# ✰若需要购买VPS，以下可供选择✰
##### 1、搬瓦工GIA高端线路，仅推荐购买GIA套餐：https://bandwagonhost.com/aff.php?aff=75015
##### 2、Dmit高端GIA线路：https://www.dmit.io/aff.php?aff=9326
##### 3、白丝云【4837线路】实惠量大管饱：https://cloudsilk.io/aff.php?aff=706
